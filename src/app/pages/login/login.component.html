<section class="section ff-inter" role="main" aria-label="Pagina de login">
    <div class="center section">
        <img src="../../../assets/imagens/logo.png" alt="Logo easytime" class="logo">
        <p class="subtitulo" role="heading" aria-level="1">Sistema de ponto eletrônico</p>

        <div class="center container-form" role="region" aria-label="Formulário de login">
            <form class="center" [formGroup]="formulario" (ngSubmit)="enviarLogin()" role="form">
                <label for="login">Login</label>
                <input 
                    name="login" 
                    formControlName="login" 
                    placeholder="Login" 
                    role="textbox"
                    aria-label="Campo para digitar o login"
                    aria-required="true"
                    aria-describedby="login-required login-pattern"
                    [attr.aria-invalid]="formulario.get('login')?.invalid && formulario.get('login')?.touched"
                    [class.shake]="shakeFields['login']"
                    [class.invalid]="formulario.get('login')?.invalid && formulario.get('login')?.touched" 
                />
                <div class="caixa-mensagem">
                    <p id="login-required" class="erro" *ngIf="formulario.get('login')?.errors?.['required'] && formulario.get('login')?.touched" role="alert">
                        Por favor, preencha o login
                    </p>
                    <p id="login-pattern" class="erro" *ngIf="formulario.get('login')?.errors?.['pattern'] && formulario.get('login')?.touched" role="alert">
                        Login deve conter letras, pode ter números, pontos e underlines
                    </p>
                </div>

                <label for="senha">Senha</label>
                <div class="senha-input">
                    <input 
                        formControlName="senha" 
                        name="senha" 
                        class="input-txt"
                        placeholder="Senha"
                        type="{{ showPassword ? 'text' : 'password' }}" 
                        role="textbox"
                        aria-label="Campo para digitar a senha"
                        aria-required="true"
                        aria-describedby="senha-required senha-minlength senha-validacao"
                        [attr.aria-invalid]="formulario.get('senha')?.invalid && formulario.get('senha')?.touched"
                        [class.shake]="shakeFields['senha']"
                        [class.invalid]="formulario.get('senha')?.invalid && formulario.get('senha')?.touched" 
                    />
                    <span class="material-symbols-outlined icon" (click)="togglePasswordVisibility()" role="button" tabindex="0" aria-label="Alternar visibilidade da senha"> 
                        {{ showPassword ? 'visibility_off' : 'visibility'}} 
                    </span>
                </div>
                <div class="caixa-mensagem display-column">
                    <p id="senha-required" class="erro" *ngIf="formulario.get('senha')?.errors?.['required'] && formulario.get('senha')?.touched" role="alert">
                        Por favor, preencha a senha
                    </p>
                    <p id="senha-minlength" class="erro" *ngIf="formulario.get('senha')?.errors?.['minlength'] && formulario.get('senha')?.touched" role="alert">
                        A senha deve conter pelo menos 8 digitos
                    </p>
                    <p id="senha-validacao" class="erro" *ngIf="formulario.get('senha')?.errors?.['senhaValidacao'] && formulario.get('senha')?.touched" role="alert">
                        A senha deve conter ao menos uma letra, um número e um caractére especial.
                    </p>

                    <p class="erro" *ngIf="error != null" role="alert">{{ error }}</p>
                </div>

                <button type="submit" class="botao" role="button">Entrar</button>
                <a [routerLink]="['/enviar-codigo']" class="link" role="link">
                    Esqueci minha senha
                </a>
            </form>
        </div>
    </div>
</section>